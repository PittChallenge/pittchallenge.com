function camelCaseToTitleCase(b){return b.replace(/([A-Z])/g," $1").replace(/^./,function(f){return f.toUpperCase()})}
window.addEventListener("DOMContentLoaded",function(){var b=(new URLSearchParams(window.location.search)).get("eventName");b?document.getElementById("eventName").innerHTML=camelCaseToTitleCase(b.substring(6)):(document.body.classList.add("error"),document.getElementById("checkInForm").style.display="none",document.getElementById("result").style.display="block",document.getElementById("result").style.transform="scale(1)",document.getElementById("resultIcon").classList="fa fa-times",document.getElementById("resultText").innerHTML=
"Event name not found");if(b=window.localStorage.getItem("email"))document.getElementById("email").value=b;document.getElementById("newEmail").value=""});
window.addEventListener("load",function(){document.getElementById("checkInForm").addEventListener("submit",function(b){b.preventDefault();const f=(new URLSearchParams(window.location.search)).get("eventName"),e=document.getElementById("email").value,d=document.getElementById("newEmail").value;document.getElementById("resultText").innerHTML="";e.endsWith(".edu")||0<e.indexOf("+")||d.endsWith(".edu")?(b=new Promise(function(a,c){a()}),d&&(b=b.then(function(){return fetch("",{method:"POST",headers:{"Content-Type":"application/json"},
body:JSON.stringify({email:e,newEmail:d})})}).then(function(a){return Promise.all([a,a.text()])}).then(function(a){const c=a[0];a=a[1];console.log(c.status,a);if(200!==c.status)throw Error(a);document.getElementById("resultText").innerHTML+="Email changed to "+d+"<br>";document.getElementById("resultIcon").classList="fa fa-check"})),b=b.then(function(){return fetch("",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:f,email:d||e})})}).then(function(a){return Promise.all([a,
a.text()])}).then(function(a){const c=a[0];a=a[1];console.log(c.status,a);if(200!==c.status)throw Error(a);a=JSON.parse(a);console.log(c.status,a);document.getElementById("resultIcon").classList="fa "+a.icon;document.getElementById("resultText").innerHTML+="Successfully checked in";window.localStorage.setItem("email",d||e)}).then(function(){document.body.classList.add("ok");document.getElementById("checkInForm").style.display="none";document.getElementById("result").style.display="block";document.getElementById("result").style.transform=
"scale(1)"}),b.catch(function(a){document.body.classList.add("error");document.getElementById("checkInForm").style.display="none";document.getElementById("result").style.display="block";document.getElementById("result").style.transform="scale(1)";document.getElementById("resultIcon").classList="fa fa-times";document.getElementById("resultText").innerHTML=a;console.error(a)})):(document.getElementById("newEmail").style.display="block",document.getElementById("newEmail").setAttribute("required",""),
document.getElementById("newEmail").focus())})}); //# sourceMappingURL=./checkin.js.map
