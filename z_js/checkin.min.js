function camelCaseToTitleCase(b){return b.replace(/([A-Z])/g," $1").replace(/^./,function(f){return f.toUpperCase()})}
window.addEventListener("DOMContentLoaded",function(){var b=(new URLSearchParams(window.location.search)).get("eventName");b?document.getElementById("eventName").innerHTML=camelCaseToTitleCase(b):(document.body.classList.add("error"),document.getElementById("checkInForm").style.display="none",document.getElementById("result").style.display="block",document.getElementById("result").style.transform="scale(1)",document.getElementById("resultIcon").classList="fa fa-times",document.getElementById("resultText").innerHTML=
"Event name not found");if(b=window.localStorage.getItem("email"))document.getElementById("email").value=b;document.getElementById("newEmail").value=""});
window.addEventListener("load",function(){document.getElementById("checkInForm").addEventListener("submit",function(b){b.preventDefault();const f=(new URLSearchParams(window.location.search)).get("eventName"),e=document.getElementById("email").value,c=document.getElementById("newEmail").value;document.getElementById("resultText").innerHTML="";e.endsWith(".edu")||0<e.indexOf("+")||c.endsWith(".edu")?(b=new Promise(function(a,d){a()}),c&&(b=b.then(function(){return fetch("",{method:"POST",headers:{"Content-Type":"application/json"},
body:JSON.stringify({email:e,newEmail:c})})}).then(function(a){return Promise.all([a,a.text()])}).then(function(a){const d=a[0];a=a[1];console.log(d.status,a);if(200!==d.status)throw Error(a);document.getElementById("resultText").innerHTML+="Email changed to "+c+"<br>";document.getElementById("resultIcon").classList="fa fa-check"})),b=b.then(function(){return fetch("",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:f,email:c||e})})}).then(function(a){return Promise.all([a,
a.text()])}).then(function(a){const d=a[0];a=a[1];console.log(d.status,a);if(200!==d.status)throw Error(a);try{const g=JSON.parse(a).icon||"fa-check";document.getElementById("resultIcon").classList="fa "+g}catch(g){document.getElementById("resultIcon").classList="fa fa-check"}document.getElementById("resultText").innerHTML+="Successfully checked in";window.localStorage.setItem("email",c||e)}),b=b.then(function(){document.body.classList.add("ok");document.getElementById("checkInForm").style.display=
"none";document.getElementById("result").style.display="block";document.getElementById("result").style.transform="scale(1)"}),b.catch(function(a){document.body.classList.add("error");document.getElementById("checkInForm").style.display="none";document.getElementById("result").style.display="block";document.getElementById("result").style.transform="scale(1)";document.getElementById("resultIcon").classList="fa fa-times";document.getElementById("resultText").innerHTML=a;console.error(a)})):(document.getElementById("newEmail").style.display=
"block",document.getElementById("newEmail").setAttribute("required",""),document.getElementById("newEmail").focus())})}); //# sourceMappingURL=./checkin.js.map
